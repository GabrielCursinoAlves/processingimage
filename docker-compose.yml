services:
  broker:
    image: rabbitmq:4-management
    ports:
      - "${PORT_AMQP}:${PORT_AMQP}" # PROTOCOL AMQP FOR RABBITMQ
      - "${PORT_MANAGEMENT}:${PORT_MANAGEMENT}" # MANAGEMENT UI
    volumes:
      - rabbitmq_data:/var/lib/rabbitmq
      
  pg:
    image: bitnami/postgresql:17.6.0
    ports:
      - "5432:5432"
    environment:
      POSTGRES_USER: "${POSTGRES_USER}"
      POSTGRES_PASSWORD: "${POSTGRES_PASSWORD}"
      POSTGRES_DB: processing
    volumes:
      - ./docker:/docker-entrypoint-initdb.d

volumes:
  rabbitmq_data: